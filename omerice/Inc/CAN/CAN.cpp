/*
 * CAN.cpp
 *
 *  Created on: 2018/08/18
 *      Author: 裕汰
 */
#include "CAN.hpp"

void can_bus::filterconfig()
{

		 sFilterConfig.FilterIdHigh         = 0x0000;				//??��?��?��??��?��??��?��??��?��?��ｵ??��?��ID??��?��??��?��?��ｻ
		   sFilterConfig.FilterIdLow          = 0x0000; //??��?��?��??��?��??��?��??��?��?��ｵ??��?��ID??��?��??��?��?��ｻ
		   sFilterConfig.FilterMaskIdHigh     = 0x0000;			//??��?��??��?��??��?��?���??��?��?��?��?16??��?��?��??��??��?��??��?��?��??��?��??��?��?���??��???��?��??��???��?��
		   sFilterConfig.FilterMaskIdLow      = 0x0000;			//??��?��??��?��??��?��?���??��?��?��?��?16??��?��?��??��??��?��??��?��?��??��?��??��?��?���??��???��?��??��???��?��
		   sFilterConfig.FilterFIFOAssignment = CAN_FILTER_FIFO0;           //??��?��??��?��??��?��?���??��?��?��?��??��?��??��?��?��??��?��??��?��??��?��FIFO 0
		   sFilterConfig.FilterBank=0;
		   sFilterConfig.FilterScale=CAN_FILTERSCALE_16BIT;
		   sFilterConfig.FilterMode=CAN_FILTERMODE_IDMASK;
		   sFilterConfig.FilterActivation = ENABLE;          //??��?��?��??��??��?��?��??��?��??��?��?���???��?��
		   sFilterConfig.SlaveStartFilterBank = 14;


		      if(HAL_CAN_ConfigFilter(canhandle, &sFilterConfig)!=HAL_OK)
		      	  {
		     printf("filterconfigerror");
		      	  }
		   HAL_CAN_Start(canhandle);

		   HAL_CAN_ActivateNotification(canhandle,CAN_IT_RX_FIFO0_MSG_PENDING);//??��?��??��?��??��??��?��???��?��?��??��?
}

